<template>
  <view class="demo-page">
    <!-- é¡µé¢å†…å®¹ -->
    <view class="content-area">
      <view class="demo-header">
        <text class="demo-title">å¢å¼ºç‰ˆå¯¼èˆªæ æ¼”ç¤º</text>
        <text class="demo-subtitle">ä½“éªŒå…¨æ–°çš„å¯¼èˆªæ è®¾è®¡</text>
      </view>
      
      <!-- åŠŸèƒ½æ¼”ç¤ºåŒºåŸŸ -->
      <view class="demo-section">
        <text class="section-title">âœ¨ æ–°å¯¼èˆªæ ç‰¹æ€§</text>
        <view class="feature-list">
          <view class="feature-item">
            <text class="feature-icon">ğŸ”¸</text>
            <view class="feature-text">
              <text class="feature-title">ç°ä»£åŒ–SVGå›¾æ ‡</text>
              <text class="feature-desc">ç²¾ç¾çš„çŸ¢é‡å›¾æ ‡ï¼Œæ›´åŠ ä¸“ä¸š</text>
            </view>
          </view>
          
          <view class="feature-item">
            <text class="feature-icon">ğŸŒ</text>
            <view class="feature-text">
              <text class="feature-title">åŠ¨æ€çŠ¶æ€å˜åŒ–</text>
              <text class="feature-desc">æ¿€æ´»çŠ¶æ€æœ‰ç¼©æ”¾ã€å‘å…‰å’Œé¢œè‰²å˜åŒ–</text>
            </view>
          </view>
          
          <view class="feature-item">
            <text class="feature-icon">ğŸ¨</text>
            <view class="feature-text">
              <text class="feature-title">å“åº”å¼è®¾è®¡</text>
              <text class="feature-desc">æ¸å˜èƒŒæ™¯ã€æ¯›ç»ç’ƒæ•ˆæœã€æµç•…åŠ¨ç”»</text>
            </view>
          </view>
          
          <view class="feature-item">
            <text class="feature-icon">ğŸ“±</text>
            <view class="feature-text">
              <text class="feature-title">è§¦è§‰åé¦ˆ</text>
              <text class="feature-desc">ç‚¹å‡»æ—¶æä¾›éœ‡åŠ¨åé¦ˆï¼ˆæ”¯æŒè®¾å¤‡ï¼‰</text>
            </view>
          </view>
        </view>
      </view>
      
      <!-- æ§åˆ¶é¢æ¿ -->
      <view class="demo-section">
        <text class="section-title">ğŸ® æ§åˆ¶é¢æ¿</text>
        <view class="control-panel">
          <view class="control-item">
            <text class="control-label">å½“å‰é€‰ä¸­ï¼š</text>
            <text class="control-value">{{ currentTabName }}</text>
          </view>
          
          <view class="control-item">
            <text class="control-label">å¾½ç« æ¼”ç¤ºï¼š</text>
            <view class="badge-controls">
              <button 
                class="badge-btn" 
                @click="setBadge(0, badgeCount0 + 1)"
                size="mini"
              >
                é¦–é¡µ +1
              </button>
              <button 
                class="badge-btn" 
                @click="setBadge(1, badgeCount1 + 1)"
                size="mini"
              >
                åˆ·é¢˜ +1
              </button>
              <button 
                class="badge-btn" 
                @click="clearAllBadges"
                size="mini"
                type="warn"
              >
                æ¸…é™¤å…¨éƒ¨
              </button>
            </view>
          </view>
          
          <view class="control-item">
            <text class="control-label">çº¢ç‚¹æ¼”ç¤ºï¼š</text>
            <view class="dot-controls">
              <button 
                class="dot-btn" 
                @click="toggleDot(2)"
                size="mini"
                :type="showDot2 ? 'warn' : 'default'"
              >
                {{ showDot2 ? 'éšè—' : 'æ˜¾ç¤º' }}è€ƒè¯•çº¢ç‚¹
              </button>
              <button 
                class="dot-btn" 
                @click="toggleDot(3)"
                size="mini"
                :type="showDot3 ? 'warn' : 'default'"
              >
                {{ showDot3 ? 'éšè—' : 'æ˜¾ç¤º' }}æˆ‘çš„çº¢ç‚¹
              </button>
            </view>
          </view>
        </view>
      </view>
      
      <!-- æ ·å¼è¯´æ˜ -->
      <view class="demo-section">
        <text class="section-title">ğŸ“‹ æ ·å¼è¯´æ˜</text>
        <view class="style-info">
          <view class="style-item">
            <text class="style-label">é«˜åº¦ï¼š</text>
            <text class="style-value">90pxï¼ˆå“åº”å¼ï¼‰</text>
          </view>
          <view class="style-item">
            <text class="style-label">å›¾æ ‡å¤§å°ï¼š</text>
            <text class="style-value">28px â†’ 32pxï¼ˆæ¿€æ´»ï¼‰</text>
          </view>
          <view class="style-item">
            <text class="style-label">åŠ¨ç”»æ—¶é•¿ï¼š</text>
            <text class="style-value">0.4s ç¼“åŠ¨</text>
          </view>
          <view class="style-item">
            <text class="style-label">ç‰¹æ•ˆï¼š</text>
            <text class="style-value">æ¯›ç»ç’ƒèƒŒæ™¯ã€å‘å…‰æ•ˆæœã€è„‰å†²åŠ¨ç”»</text>
          </view>
        </view>
      </view>
      
      <!-- åº•éƒ¨å ä½ï¼Œé¿å…è¢«å¯¼èˆªæ é®æŒ¡ -->
      <view class="bottom-spacer"></view>
    </view>
    
    <!-- å¢å¼ºç‰ˆå¯¼èˆªæ  -->
    <EnhancedTabbar 
      :current="currentTab" 
      @change="onTabChange"
      ref="enhancedTabbar"
    />
  </view>
</template>

<script>
import EnhancedTabbar from '@/components/EnhancedTabbar.vue'

export default {
  name: 'TabbarDemo',
  components: {
    EnhancedTabbar
  },
  data() {
    return {
      currentTab: 0,
      badgeCount0: 0,
      badgeCount1: 0,
      showDot2: false,
      showDot3: false
    }
  },
  computed: {
    currentTabName() {
      const names = ['é¦–é¡µ', 'åˆ·é¢˜', 'è€ƒè¯•', 'æˆ‘çš„']
      return names[this.currentTab] || 'æœªçŸ¥'
    }
  },
  methods: {
    onTabChange(index) {
      this.currentTab = index
      console.log('åˆ‡æ¢åˆ°æ ‡ç­¾é¡µ:', index)
    },
    
    setBadge(index, count) {
      if (index === 0) {
        this.badgeCount0 = count
      } else if (index === 1) {
        this.badgeCount1 = count
      }
      
      // æ›´æ–°å¯¼èˆªæ å¾½ç« 
      if (this.$refs.enhancedTabbar) {
        this.$refs.enhancedTabbar.updateBadge(index, count)
      }
    },
    
    clearAllBadges() {
      this.badgeCount0 = 0
      this.badgeCount1 = 0
      
      if (this.$refs.enhancedTabbar) {
        this.$refs.enhancedTabbar.updateBadge(0, 0)
        this.$refs.enhancedTabbar.updateBadge(1, 0)
        this.$refs.enhancedTabbar.updateBadge(2, 0)
        this.$refs.enhancedTabbar.updateBadge(3, 0)
      }
    },
    
    toggleDot(index) {
      if (index === 2) {
        this.showDot2 = !this.showDot2
        if (this.$refs.enhancedTabbar) {
          this.$refs.enhancedTabbar.showDot(2, this.showDot2)
        }
      } else if (index === 3) {
        this.showDot3 = !this.showDot3
        if (this.$refs.enhancedTabbar) {
          this.$refs.enhancedTabbar.showDot(3, this.showDot3)
        }
      }
    }
  },
  
  onLoad() {
    console.log('å¯¼èˆªæ æ¼”ç¤ºé¡µé¢åŠ è½½å®Œæˆ')
  }
}
</script>

<style scoped>
.demo-page {
  min-height: 100vh;
  background: linear-gradient(180deg, #f0f2f5 0%, #ffffff 100%);
}

.content-area {
  padding: 40rpx 30rpx;
  padding-bottom: 180rpx; /* ä¸ºå¯¼èˆªæ ç•™å‡ºç©ºé—´ */
}

.demo-header {
  text-align: center;
  margin-bottom: 60rpx;
}

.demo-title {
  font-size: 48rpx;
  font-weight: bold;
  color: #333;
  display: block;
  margin-bottom: 16rpx;
}

.demo-subtitle {
  font-size: 28rpx;
  color: #666;
  display: block;
}

.demo-section {
  background: #ffffff;
  border-radius: 24rpx;
  padding: 40rpx;
  margin-bottom: 30rpx;
  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.08);
}

.section-title {
  font-size: 32rpx;
  font-weight: bold;
  color: #333;
  display: block;
  margin-bottom: 30rpx;
}

/* åŠŸèƒ½åˆ—è¡¨ */
.feature-list {
  display: flex;
  flex-direction: column;
  gap: 24rpx;
}

.feature-item {
  display: flex;
  align-items: flex-start;
  padding: 24rpx;
  background: #f8f9fa;
  border-radius: 16rpx;
}

.feature-icon {
  font-size: 36rpx;
  margin-right: 20rpx;
  margin-top: 4rpx;
}

.feature-text {
  flex: 1;
}

.feature-title {
  font-size: 28rpx;
  font-weight: bold;
  color: #333;
  display: block;
  margin-bottom: 8rpx;
}

.feature-desc {
  font-size: 24rpx;
  color: #666;
  line-height: 1.5;
}

/* æ§åˆ¶é¢æ¿ */
.control-panel {
  display: flex;
  flex-direction: column;
  gap: 24rpx;
}

.control-item {
  display: flex;
  flex-direction: column;
  gap: 16rpx;
}

.control-label {
  font-size: 26rpx;
  font-weight: bold;
  color: #333;
}

.control-value {
  font-size: 24rpx;
  color: #007AFF;
  padding: 12rpx 20rpx;
  background: #f0f6ff;
  border-radius: 12rpx;
  display: inline-block;
}

.badge-controls,
.dot-controls {
  display: flex;
  gap: 16rpx;
  flex-wrap: wrap;
}

.badge-btn,
.dot-btn {
  flex: 1;
  min-width: 140rpx;
  font-size: 22rpx !important;
}

/* æ ·å¼ä¿¡æ¯ */
.style-info {
  display: flex;
  flex-direction: column;
  gap: 16rpx;
}

.style-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16rpx 0;
  border-bottom: 1rpx solid #f0f0f0;
}

.style-item:last-child {
  border-bottom: none;
}

.style-label {
  font-size: 26rpx;
  color: #333;
  font-weight: 500;
}

.style-value {
  font-size: 24rpx;
  color: #666;
  text-align: right;
  flex: 1;
  margin-left: 20rpx;
}

.bottom-spacer {
  height: 100rpx;
}

/* å“åº”å¼è®¾è®¡ */
@media screen and (max-width: 750rpx) {
  .badge-controls,
  .dot-controls {
    flex-direction: column;
  }
  
  .badge-btn,
  .dot-btn {
    min-width: auto;
  }
}
</style>
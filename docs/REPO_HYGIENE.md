# 仓库治理与文件提交规范

## 1. 原则
只提交：源代码、配置模板、必要文档、构建脚本。  
不提交：个人环境文件、临时调试页、二进制、日志、数据库、密钥、构建产物。

## 2. 禁止提交清单
| 类型 | 例子 | 处理方式 |
|------|------|----------|
| 二进制可执行 | *.exe, *.dll | 加入 .gitignore；本地需要用就放根目录不跟踪 |
| 数据库/缓存 | *.db, *.sqlite | 只保留迁移/seed 脚本 |
| 日志 | *.log, logs/ | 本地调试用，忽略 |
| 临时调试页面 | home-min.vue / simple-test.vue | 调试后立即删除 |
| 个人密钥 | 密钥.txt, *.pem | 使用 .env 和 Secret 管理 |
| 构建产物 | dist/, build/, unpackage/ | CI/CD 重新生成 |
| 重复配置 | src/pages.json (与根 pages.json 重复) | 保留单一权威版本 |

## 3. pages.json 规范
仅根目录 `zhangshang-shuati-app/pages.json` 作为权威文件；禁止再复制一份到 src/。  
构建前脚本会校验是否存在冗余副本。

## 4. 校验脚本
`npm run preflight` 会执行重复/脏文件扫描：
1. 检测 src/pages.json 是否存在 → 提示删除
2. 检测是否有被跟踪的 *.exe / *.db / 调试页模式

## 5. 添加新文件前自检
新增文件若满足以下任一请三思：
- 仅本地调试用途且无长期价值
- 依赖机器生成，可在 CI 重建
- 含敏感信息或授权凭证

## 6. 例外申请
确需提交二进制或特殊资产：请在 PR 说明中写明：用途、来源、替代方案、验证方式。

---
保持仓库“干净”= 降低协作者心智负担，提高可维护性。
